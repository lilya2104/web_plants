<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/head"/>
<body>
<div th:replace="fragments/navbar"></div>
<main class="container">
    <article style="max-width: 600px; margin: 0 auto;">
        <hgroup>
            <h1>Добавление статьи</h1>
            <p>Заполните информацию для статьи ниже</p>
        </hgroup>
        <form th:action="@{/articles/add}"
              th:method="post"
              th:object="${articleModel}"> <!-- привязка формы к модели -->


            <fieldset>
                <label for="productName">
                    Выберите растение
                    <select th:field="*{productName}"
                            th:errorclass="is-invalid"
                            id="productName"
                            required>
                        <option value="">Выберите растение</option>
                        <option th:each="product : ${products}"
                                th:value="${product.name}"
                                th:text="${product.name + ' - ' + product.price + '₽'}">
                        </option>
                    </select>
                    <small th:if="${#fields.hasErrors('productName')}" th:errors="*{productName}" class="text-danger"></small>
                    <small>Выберите растение, к которому привязать статью</small>
                </label>
            </fieldset>


            <!-- Основная информация статьи -->
            <fieldset>

                <label for="title">
                    Заголовок статьи
                    <!-- th:field="*{title}" привязка поля к свойству объекта (автозаполнение title, id, value)
                     th:if="${#fields.hasErrors('title')}" условное отображение ошибок-->
                    <input th:field="*{title}"
                           th:errorclass="is-invalid"
                           type="text"
                           id="title"
                           placeholder="Введите заголовок статьи"
                           required/>
                    <small th:if="${#fields.hasErrors('title')}" th:errors="*{title}" class="text-danger"></small>
                </label>


                <label for="readTime">
                    Время чтения
                    <input th:field="*{readTime}"
                           th:errorclass="is-invalid"
                           type="number"
                           min="1"
                           max="60"
                           id="readTime"
                           placeholder="Введите время чтения статьи"
                           required/>
                    <small th:if="${#fields.hasErrors('readTime')}" th:errors="*{readTime}" class="text-danger"></small>
                </label>

                <label for="plantFamily">
                    Семейство растения
                    <select th:field="*{plantFamily}"
                            th:errorclass="is-invalid"
                            id="plantFamily"
                            required>
                        <option value="">Выберите семейство</option>
                        <option th:each="family : ${plantFamilies}"
                        th:value="${family}"
                        th:text="${family.displayName}"></option>
                    </select>
                    <small th:if="${#fields.hasErrors('plantFamily')}" th:errors="*{plantFamily}" class="text-danger"></small>
                </label>

                <label for="description">
                    Общее описание
                    <textarea th:field="*{description}"
                              th:errorclass="is-invalid"
                              id="description"
                              rows="4"
                              placeholder="Общее описание растения, его особенности и характеристики..."
                              required></textarea>
                    <small th:if="${#fields.hasErrors('description')}" th:errors="*{description}" class="text-danger"></small>
                </label>
            </fieldset>

            <!-- Разделы статьи -->
            <fieldset>

                <label for="care">
                    Уход и содержание
                    <textarea th:field="*{textArticle.care}"
                              th:errorclass="is-invalid"
                              id="care"
                              rows="10"
                              placeholder="Подробное описание ухода: полив, температура, влажность, подкормка..."></textarea>
                    <small th:if="${#fields.hasErrors('textArticle.care')}" th:errors="*{textArticle.care}" class="text-danger"></small>
                </label>

                <label for="replication">
                    Размножение
                    <textarea th:field="*{textArticle.replication}"
                              th:errorclass="is-invalid"
                              id="replication"
                              rows="4"
                              placeholder="Способы размножения растения: черенкование, семенами, делением..."></textarea>
                    <small th:if="${#fields.hasErrors('textArticle.replication')}" th:errors="*{textArticle.replication}" class="text-danger"></small>
                </label>

                <label for="illness">
                    Болезни и проблемы
                    <textarea th:field="*{textArticle.illness}"
                              th:errorclass="is-invalid"
                              id="illness"
                              rows="4"
                              placeholder="Распространенные болезни, симптомы, лечение..."></textarea>
                    <small th:if="${#fields.hasErrors('textArticle.illness')}" th:errors="*{textArticle.illness}" class="text-danger"></small>
                </label>

                <label for="pests">
                    Вредители
                    <textarea th:field="*{textArticle.pests}"
                              th:errorclass="is-invalid"
                              id="pests"
                              rows="4"
                              placeholder="Основные вредители, признаки поражения, методы борьбы..."></textarea>
                    <small th:if="${#fields.hasErrors('textArticle.pests')}" th:errors="*{textArticle.pests}" class="text-danger"></small>
                </label>
            </fieldset>

            <button type="submit">Добавить статью</button>
        </form>
    </article>
</main>
<footer th:replace="fragments/footer"></footer>
</body>
</html>