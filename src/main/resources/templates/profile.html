<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head"/>
<body>
<div th:replace="fragments/navbar"></div>
<main class="container">
    <hgroup>
        <h1>Профиль пользователя</h1>
        <p>Информация о вашей учетной записи</p>
    </hgroup>
    <article class="card">
        <div class="grid">
            <div th:object="${user}">
                <h2 th:text="*{username}"></h2>
                <p><strong>Логин:</strong> <span th:text="*{username}"></span></p>
                <p><strong>Email:</strong> <span th:text="*{email}"></span></p>
                <p><strong>Адрес доставки:</strong> <span th:text="*{shippingAddress}"></span></p>
            </div>
            <div class="text-center">
                <img src="/pic/user.png" alt="Профиль пользователя" style="width: 100%; max-width: 300px; border-radius: var(--pico-border-radius);">
            </div>
        </div>

        <h2>Мои покупки</h2>
        <div th:if="${orders == null or orders.empty}">
            <span>У вас пока что нет заказов</span>
        </div>
        <div th:if="${orders != null and !orders.empty}">
            <div class="grid" style="grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                <div th:each="order : ${orders}" class="purchase-card">
                    <article class="card" style="margin-bottom: 0;">
                        <h4 th:text="${order.nameProduct}">Название растения</h4>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span>Количество: <strong th:text="${order.count}"></strong> шт.</span>
                            <span>Цена: <strong th:text="${#numbers.formatDecimal(order.price, 0, 2)}"></strong> ₽</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Итого: <strong th:text="${#numbers.formatDecimal(order.total_price, 0, 2)}"></strong> ₽</span>
                            <span class="badge" style="background-color: var(--pico-primary); color: white;">
                                Заказ оформлен
                            </span>
                        </div>
                    </article>
                </div>
            </div>
        </div>
    </article>
</main>
<footer th:replace="fragments/footer"></footer>
</body>
</html>