<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/head"/>
<body>
<div th:replace="fragments/navbar"></div>
<main class="container">
    <hgroup>
        <div class = "grid">
            <h1 th:text="${articleDetails.title}"></h1>
            <a th:href="@{/articles}" role="button" class="secondary">
                ← Назад к списку статей
            </a>
        </div>
        <p>Подробные сведения о растении</p>
    </hgroup>

    <article class="card">
        <div class = "grid">
            <div>
                <img src="/pic/plant.avif" alt="Растение" style="width: 100%; max-width: 400px; border-radius: var(--pico-border-radius);">
            </div>
            <div>
                <h2 th:text="${articleDetails.title}"></h2>
                <p><strong>Время чтения:</strong> <span th:text="${articleDetails.readTime}"></span> минут</p>
                <p><strong>Семейство растения:</strong> <span th:text="${articleDetails.plantFamily?.displayName}"></span></p>
                <p><strong>Описание:</strong> <span th:text="${articleDetails.description}"></span></p>
            </div>
        </div>

        <!-- Уход и содержание -->
        <section th:if="${articleDetails.textArticle?.care}" style="margin-top: 2rem;">
            <h3>Уход и содержание</h3>
            <p th:text="${articleDetails.textArticle?.care}" style="line-height: 1.6;"></p>
        </section>

        <!-- Размножение -->
        <section th:if="${articleDetails.textArticle?.replication}" style="margin-top: 2rem;">
            <h3>Размножение</h3>
            <p th:text="${articleDetails.textArticle?.replication}" style="line-height: 1.6;"></p>
        </section>

        <!-- Болезни -->
        <section th:if="${articleDetails.textArticle?.illness}" style="margin-top: 2rem;">
            <h3>Болезни и проблемы</h3>
            <p th:text="${articleDetails.textArticle?.illness}" style="line-height: 1.6;"></p>
        </section>

        <!-- Вредители -->
        <section th:if="${articleDetails.textArticle?.pests}" style="margin-top: 2rem;">
            <h3>Вредители</h3>
            <p th:text="${articleDetails.textArticle?.pests}" style="line-height: 1.6;"></p>
        </section>

        <h3>Купить это растение</h3>
        <section th:if="${articleDetails.productInfoDto}" style="margin-top: 2rem; padding: 1rem; background-color: var(--pico-secondary-fade); border-radius: var(--pico-border-radius);">
            <div class="grid">
                <div>
                    <img src="/pic/plant.avif" alt="Растение" style="width: 40%; max-width: 400px; border-radius: var(--pico-border-radius);">
                </div>
                <div>
                    <p><strong>Название:</strong> <span th:text="${articleDetails.productInfoDto.name}"></span></p>
                    <p><strong>Цена:</strong> <span th:text="${articleDetails.productInfoDto.price}"></span> ₽</p>
                </div>
                <div style="text-align: right;">
                    <a th:href="@{/products/{productName}(productName=${articleDetails.productInfoDto.name})}"
                       role="button"
                       class="outline">
                        Перейти к товару →
                    </a>
                </div>
            </div>
        </section>

        <div style="margin-top: 2rem; display: flex; gap: 1rem;">
            <div sec:authorize="hasRole('ADMIN')">
                <a th:href="@{/articles/delete/{article-title}(article-title=${articleDetails.title})}"
                role="button"
                class="contrast"
                onclick="return confirm('Вы уверены, что хотите удалить эту статью?')">
                Удалить статью
                </a>
            </div>
        </div>
    </article>
</main>
<footer th:replace="fragments/footer"></footer>
</body>
</html>